{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Container/Container.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","services/api.js","components/error.jpg","components/cover.jpg","components/Container/Container.js","App.js","index.js"],"names":["module","exports","Searchbar","onSubmit","useState","query","setQuery","className","s","SearchForm","e","preventDefault","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","name","value","onChange","target","modalRoot","document","querySelector","Modal","onClose","src","loading","setLoading","handleImageLoad","prev","useEffect","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","Overlay","onClick","currentTarget","turget","alt","onLoad","color","height","width","ImageGalleryItem","imageData","id","webformatURL","largeImageURL","showModal","setShowModal","image","setImage","toggleModal","ImageGalleryItemImage","data-img","dataset","img","propTyps","PropTypes","shape","number","string","ImageGallery","gallery","map","item","index","Api","timeout","array","isRequired","Button","api","fetchImage","page","fetch","then","response","ok","json","Promise","reject","Error","Container","children","container","Status","App","setGallery","setPage","status","setStatus","error","setError","total","setTotal","data","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","message","cover","errorImage","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9a999a0d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1lISj\",\"Modal\":\"Modal_Modal__27Oec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1vmTs\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2bIYo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3Ty5_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1FFvU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__16MYt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1aBpV\",\"SearchForm\":\"Searchbar_SearchForm__3ajC0\",\"SearchFormButton\":\"Searchbar_SearchFormButton__13oDG\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1PYbS\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1u-RR\"};","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Searchbar.module.css';\r\n\r\n// import { toast } from 'react-toastify';\r\n// import { render } from '@testing-library/react';\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleInputChange = ({ target }) => {\r\n    setQuery(target.value);\r\n  };\r\n\r\n  const handleOnSubmit = e => {\r\n    e.preventDefault();\r\n    onSubmit(query);\r\n    setQuery('');\r\n  };\r\n\r\n  return (\r\n    <header className={s.Searchbar}>\r\n      <form className={s.SearchForm} onSubmit={handleOnSubmit}>\r\n        <button type=\"submit\" className={s.SearchFormButton}>\r\n          <span className={s.SearchFormButtonLabel}>Search</span>\r\n        </button>\r\n        <input\r\n          className={s.SearchFormInput}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          name=\"query\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({ onClose, src }) {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleImageLoad = () => {\r\n    setLoading(prev => !prev);\r\n  };\r\n\r\n  const handleBackdropClick = e => {\r\n    if (e.currentTarget === e.turget) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = e => {\r\n      if (e.code === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    handleImageLoad();\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [onClose]);\r\n\r\n  // const handleImageLoaded = () => {\r\n  //   this.setState({ isLoading: false });\r\n  // };\r\n\r\n  return createPortal(\r\n    <div className={s.Overlay} onClick={handleBackdropClick}>\r\n      <div className={s.Modal}>\r\n        {/* {this.props.children} */}\r\n        <img\r\n          src={src}\r\n          alt=\"\"\r\n          // onClose={this.toggleModal}\r\n          onLoad={handleImageLoad}\r\n        />\r\n        {loading && (\r\n          <Loader type=\"BallTriangle\" color=\"#00BFFF\" height={80} width={80} />\r\n        )}\r\n      </div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  src: PropTypes.string.isRequired,\r\n};\r\n","import { useState } from 'react';\r\nimport Modal from '../Modal';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nexport default function ImageGalleryItem({\r\n  imageData: { id, webformatURL, largeImageURL },\r\n}) {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [image, setImage] = useState(null);\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(prev => !prev);\r\n  };\r\n\r\n  const handleImageClick = e => {\r\n    setImage(e.target.dataset.img);\r\n    toggleModal();\r\n  };\r\n\r\n  // this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n\r\n  return (\r\n    <>\r\n      <li className={s.ImageGalleryItem}>\r\n        <img\r\n          src={webformatURL}\r\n          alt={id}\r\n          className={s.ImageGalleryItemImage}\r\n          data-img={largeImageURL}\r\n          onClick={handleImageClick}\r\n        />\r\n      </li>\r\n      {showModal && <Modal onClose={toggleModal} src={image} />}\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTyps = {\r\n  imageData: PropTypes.shape({\r\n    id: PropTypes.number,\r\n    webformatURL: PropTypes.string,\r\n    largeImageURL: PropTypes.string,\r\n  }),\r\n};\r\n","import ImageGalleryItem from '../ImageGalleryItem';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\n\r\nexport default function ImageGallery({ gallery }) {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {gallery.map((item, index) => {\r\n        return <ImageGalleryItem imageData={item} key={index} />;\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTyps = {\r\n  gallery: PropTypes.array.isRequired,\r\n};\r\n","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nexport default function Api() {\r\n  return (\r\n    <Loader\r\n      type=\"BallTriangle\"\r\n      color=\"#00BFFF\"\r\n      height={80}\r\n      width={80}\r\n      timeout={3000} //3 secs\r\n    />\r\n  );\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nexport default function Button({ onClick }) {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","// import axios from 'axios';\r\n\r\n// const BASE_URL = 'https://pixabay.com/api/';\r\n// const API_KEY = '14395659-9e9c935ac58e7e08d55a10421';\r\n// axios.deaults.baseURL = BASE_URL;\r\n// axios.deaults.params = {\r\n//   key: API_KEY,\r\n//   image_type: 'photo',\r\n//   orientation: 'horizontal',\r\n//   per_page: 12,\r\n// };\r\n// const getImages = async ({ q, page }) => {\r\n//   try {\r\n//     const { data } = await axios.get('', {\r\n//       params: { q, page },\r\n//     });\r\n//     return data.hits;\r\n//   } catch (error) {\r\n//     console.log('error', { error });\r\n//     return [];\r\n//   }\r\n// };\r\n// export default {\r\n//   getImages,\r\n// };\r\n\r\nconst API_KEY = '14395659-9e9c935ac58e7e08d55a10421';\r\n\r\nfunction fetchImage(query, page) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${API_KEY}&image_type=all&orientation=horizontal&per_page=12`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(\r\n      new Error(`Нет такого изображения по запросу \"${query}\"`),\r\n    );\r\n  });\r\n}\r\n\r\nconst api = { fetchImage };\r\n\r\nexport default api;\r\n","export default __webpack_public_path__ + \"static/media/error.34e0bf5d.jpg\";","export default __webpack_public_path__ + \"static/media/cover.a984235c.jpg\";","import s from './Container.module.css';\r\n\r\nfunction Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n\r\nexport default Container;","import { useEffect, useState } from 'react';\r\n// import { ToastContainer, toast } from 'react-toastify';\r\n// // import 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport Loader from './components/Loader';\r\nimport Button from './components/Button';\r\n// import Modal from './components/Modal';\r\nimport Api from './services/api';\r\n\r\nimport errorImage from './components/error.jpg';\r\nimport cover from './components/cover.jpg';\r\nimport Container from './components/Container';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nexport default function App() {\r\n  const [gallery, setGallery] = useState([]);\r\n  const [query, setQuery] = useState(null);\r\n  const [page, setPage] = useState(0);\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n  const [error, setError] = useState(null);\r\n  const [total, setTotal] = useState(null);\r\n\r\n  const handleSearchForm = query => {\r\n    setQuery(query);\r\n    setPage(1);\r\n    setGallery([]);\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    setPage(prev => prev + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!query) {\r\n      return;\r\n    }\r\n    setStatus(Status.PENDING);\r\n    Api.fetchImage(query, page)\r\n      .then(data => {\r\n        setTotal(data.total);\r\n        if (data.total < 1) {\r\n          return Promise.reject(\r\n            new Error(`Не удалось найти картинки по запросу ${query}`),\r\n          );\r\n        }\r\n        setGallery(prev => [...prev, ...data.hits]);\r\n        setStatus(Status.RESOLVED);\r\n      })\r\n      .catch(error => {\r\n        setError(error);\r\n        setStatus(Status.REJECTED);\r\n      });\r\n  }, [page, query]);\r\n\r\n  window.scrollTo({\r\n    top: document.documentElement.scrollHeight,\r\n    behavior: 'smooth',\r\n  });\r\n\r\n  return (\r\n    <Container>\r\n      <Searchbar onSubmit={handleSearchForm} />\r\n      {/* Вариант №1 */}\r\n      {(status === Status.IDLE || status === Status.REJECTED) && (\r\n        <div>\r\n          <p>\r\n            {(status === Status.IDLE && 'Нужно проверить... 😜') ||\r\n              (status === Status.REJECTED && error.message)}\r\n          </p>\r\n          <img\r\n            src={\r\n              (status === Status.IDLE && cover) ||\r\n              (status === Status.REJECTED && errorImage)\r\n            }\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {(status === Status.RESOLVED || status === Status.PENDING) && (\r\n        <>\r\n          <ImageGallery gallery={gallery} />\r\n          {total > gallery.length && <Button onClick={handleLoadMore} />}\r\n          {status === Status.PENDING && <Loader />}\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}